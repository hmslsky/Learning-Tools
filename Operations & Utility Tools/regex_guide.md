# 正则表达式核心语法指南

## 一、基础概念
### 1.1 定义与作用
正则表达式（Regular Expression）是通过特定语法规则构建的文本模式匹配工具，主要功能包括：
- 文本内容验证（如邮箱格式校验）
- 字符串提取（从日志中提取特定信息）
- 文本替换（批量修改文件内容）

### 1.2 核心组成
正则表达式由两大要素构成：
1. 字面字符：普通文本字符（a-z,0-9等）
2. 元字符：具有特殊含义的符号（. * + ?等）

## 二、基本组成元素
### 2.1 字符匹配
| 类型         | 表达式   | 说明                          | 等效写法        |
|--------------|----------|-------------------------------|-----------------|
| 单字符匹配   | [ABC]    | 匹配指定字符集合              |                 |
| 排除匹配     | [^ABC]   | 匹配非指定字符                |                 |
| 范围匹配     | [A-Z]    | 匹配字母区间                  |                 |
| 通配符       | .        | 匹配除换行符外的任意字符      | [^\n\r]         |
| 全匹配       | [\s\S]   | 匹配所有字符（含换行）        |                 |
| 单词字符     | \w       | 匹配字母/数字/下划线          | [A-Za-z0-9_]    |

### 2.2 特殊符号
| 符号 | 名称       | 功能描述                     |
|------|------------|------------------------------|
| ^    | 起始符     | 匹配字符串/行的开始位置      |
| $    | 结束符     | 匹配字符串/行的结束位置      |
| \b   | 单词边界   | 匹配单词的开始或结束位置     |
| \B   | 非单词边界 | 匹配不在单词边界的位置       |

### 2.3 转义字符
| 字符 | 名称           | Unicode编码 | 说明                      |
|------|----------------|-------------|---------------------------|
| \n   | 换行符         | \x0a        | 新行标记                  |
| \r   | 回车符         | \x0d        | 回车标记                  |
| \t   | 水平制表符     | \x09        | 表格分隔符                |
| \f   | 换页符         | \x0c        | 分页标记                  |
| \v   | 垂直制表符     | \x0b        | 纵向表格分隔符            |

## 三、高级匹配机制
### 3.1 量词限定
| 量词   | 说明                | 示例        |
|--------|---------------------|-------------|
| *      | 0次或多次           | a*          |
| +      | 1次或多次           | a+          |
| ?      | 0次或1次            | a?          |
| {n}    | 精确n次             | a{3}        |
| {n,}   | 至少n次             | a{3,}       |
| {n,m}  | n到m次              | a{3,5}      |

### 3.2 逻辑操作
| 表达式       | 类型       | 说明                          |
|--------------|------------|-------------------------------|
| a|b         | 或运算     | 匹配a或b                      |
| (?:pattern)  | 非捕获分组 | 匹配但不捕获                  |
| (?=pattern)  | 正向预查   | 匹配后面跟着pattern的位置     |
| (?!pattern)  | 负向预查   | 匹配后面不跟pattern的位置     |

### 3.3 分组与引用
```regex
(exp)        // 捕获分组（自动编号）
(?<name>exp) // 命名分组
\1           // 引用第一个分组
\k<name>     // 引用命名分组
```

## 四、匹配模式修饰符
| 修饰符 | 全称              | 功能描述                     |
|--------|-------------------|------------------------------|
| i      | Case-Insensitive | 忽略大小写匹配               |
| g      | Global           | 全局匹配（查找所有匹配项）   |
| m      | Multiline        | 多行模式（^/$匹配行首尾）    |
| s      | Singleline       | 单行模式（.匹配换行符）      |

## 五、常用元字符速查
| 元字符 | 匹配内容          | 反向匹配  |
|--------|-------------------|-----------|
| \d     | 数字字符          | \D        |
| \s     | 空白字符          | \S        |
| \w     | 单词字符          | \W        |
| \p{P}  | 标点符号          |           |
| \x41   | ASCII字符（A）    |           |
| \u4e2d | Unicode字符（中） |           |

## 六、优先级规则
1. 转义符（\）
2. 括号（()、[]）
3. 量词（* + ? {}）
4. 锚点（^ $）
5. 或操作（|）

## 七、实用示例库
```regex
// 邮箱验证
^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$

// URL提取
(https?|ftp)://[^\s/$.?#].[^\s]*

// HTML标签匹配
<([a-z]+)([^<]+)*(?:>(.*)<\/\1>|[^>]+/>)
```
