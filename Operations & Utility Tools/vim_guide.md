# Vim 高效使用指南

## 一、核心操作

### 1.1 文本搜索与替换
#### 搜索基础
- `/` 或 `?` 进入搜索模式，`n`/`N` 导航匹配项
- 正则支持：`m$` 匹配行尾m，`m\$` 匹配m$字符
- 大小写控制：`\c`（不敏感） `\C`（敏感）
- 单词搜索：`*`（精确单词） `g*`（模糊匹配）

#### 替换语法
`:范围s/目标/替换/标志`
```vim
:%s#old/new#g  " 使用#作为分隔符
```

#### 范围控制表
| 范围表达式       | 作用域               |
|------------------|----------------------|
| `%`              | 整个文件             |
| `'<,'>`          | 可视化选区           | 
| `10,20`          | 10-20行             |
| `.,+3`           | 当前行及后3行        |

#### 常用替换模式
```vim
:%s/\s\+$//g        " 删除行尾空格
:%s/^\s*//g         " 删除行首空格
:%s/^$//g           " 删除空行
:%s/\(abc\)\(.*\)\(xyz\)/\3\2\1/g  " 交换abc与xyz
```

### 1.2 光标移动
#### 基础导航
| 快捷键 | 功能               |
|--------|--------------------|
| gg     | 文件首行           |
| G      | 文件末行           |
| 0      | 行首               |
| $      | 行尾               |
| w/e    | 下一个单词首/尾    |
| Ctrl+d/u | 半页滚动       |

#### 高级定位
```vim
25G     " 跳转至25行
zt/zz/zb  " 光标行置顶/居中/置底
%       " 括号匹配跳转
```

### 1.3 文本编辑
#### 插入模式
| 命令 | 插入位置           |
|------|--------------------|
| i    | 光标前             |
| a    | 光标后             |
| o    | 下方新行           |
| O    | 上方新行           |

#### 删除操作
```vim
dw     " 删除单词
d$     " 删至行尾
dgg    " 删至文件头
:%g/^$/d  " 删除所有空行
```

#### 复制粘贴
```vim
yy     " 复制当前行
yiw    " 复制当前单词
p/P    " 粘贴到后/前
```

## 二、多文件操作

### 2.1 分屏管理
```vim
:split     " 水平分屏
:vsplit    " 垂直分屏
Ctrl+w hjkl  " 切换分屏
Ctrl+w >/<   " 调整宽度
```

### 2.2 标签页
```vim
:tabnew    " 新建标签页
:tabn/p    " 切换标签页
:tabc      " 关闭当前标签
```

### 2.3 文件对比
```vim
vimdiff file1 file2  " 启动对比模式
dp        " 推送修改到对比文件
do        " 获取对比文件修改
[c ]c     " 跳转差异点
```

## 三、高级功能

### 3.1 宏录制
```vim
qa      " 开始录制宏a
q       " 停止录制
@a      " 执行宏a
10@a    " 重复执行10次
```

### 3.2 块操作
1. Ctrl+v 进入可视块模式
2. 选择文本区域
3. 执行编辑命令（I/A插入，d删除等）

### 3.3 寄存器管理
#### 寄存器类型
| 类型               | 标识符 | 特点                     |
|--------------------|--------|--------------------------|
| 无名寄存器         | "      | 默认存储                 |
| 数字寄存器         | 0-9    | 历史记录                 |
| 系统剪贴板         | +      | 跨程序交互               |
| 只读寄存器         | %      | 存储文件名               |

#### 寄存器操作
```vim
"ayy    " 复制到a寄存器
"ap     " 粘贴a寄存器内容
:reg    " 查看寄存器状态
```

## 四、插件配置

### 4.1 NERDTree
```vim
Plug 'preservim/nerdtree'  " 安装命令
map <F2> :NERDTreeToggle<CR>
```

#### 常用操作
```vim
o       " 打开文件/目录
s       " 垂直分割打开
t       " 新标签页打开
R       " 刷新目录树
I       " 显示隐藏文件
```

## 五、环境配置

### 5.1 编码设置
```vim
:set fileencoding=utf-8  " 修改文件编码
:set fileformat=unix     " 换行符格式
```

### 5.2 搜索配置
```vim
:set ignorecase  " 忽略大小写
:set smartcase   " 智能大小写
:set wrapscan    " 循环搜索
```

### 5.3 界面优化
```vim
:set number      " 显示行号
:set cursorline  " 高亮当前行
:set scrolloff=5 " 保持视界边距
```